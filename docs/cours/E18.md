# E18

## REST naming ressources

[doc](https://restfulapi.net/resource-naming/)

### nom des Endpoints (routes) : Collections et Singleton

toutes nos routes parlent de ressources, c'est à dire nos entités dans O'Flix

il faut les mettre au pluriels, car ça induit le fait de récupérer une collection d'objets

On ajoute l'ID pour ne récupérer qu'une seule ressource : singleton

```text
GET /api/movies
GET /api/movies/221
```

On a la possibilité de faire des sous-ressources et des sous-singleton

```text
GET /api/movies/221/seasons
GET /api/movies/221/seasons/489
```

ne pas utiliser le `/` seul à la fin
ne pas utiliser le `_` mais utiliser le `-` dans nos URL

### utilisation des méthodes plutôt que de verbes dans l'URL

Les méthods prennent une place essentielle dans notre endpoint

```text
GET  /api/movies : récupérer toutes les films
POST /api/movies : créer un nouveau film
```

## coté code : BREAD vs CRUD

CRUD : Create Read Update Delete
Ce sont les nommages pour les actions de BDD
Cela ne correspond pas à notre vision d'API REST

BREAD : Browse Read Edit Add Delete
Ce sont les nommages pour les méthodes de controller (API)
Cela correspond mieux à notre vision d'API REST
Ce n'est pas une obligation, mais JB trouve ça pas mal.

## API : 404

On a pas le droit de faire du HTML, donc pas le droit à lancer des exceptions

Il faut donc renvoyer "manuellement" un code de status 404

```php
if ($movie === null){
    // ! on est dans une API donc pas de HTML
    // throw $this->createNotFoundException();
    return $this->json(
        // on pense UX : on fournit un message
        [
            "message" => "Ce film n'existe pas"
        ],
        // le code de status : 404
        Response::HTTP_NOT_FOUND
        // on a pas besoin de preciser les autres arguments
    );
}
```

## API : POST/PUT/PATCH

### POST : création



### PUT/PATCH : modification

## API : DELETE
